<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/font/fontawesome-free-6.2.1-web/css/all.min.css">
<link rel="stylesheet" href='/css/iot/home.css'>

</head>

<body>
    <%- include('../includes/navigation.ejs') %>
	<div class="iot_container">
		<div class="iot_wrap_group">
			<h1 class="iot_group_title">Cụm</h1>
				<% if (data.length > 0) { %>
			<div class="iot_list_group">
					<% for (let dt of data) { %>
						<div class="iot_item_group">
							<div class="top_item_iot">
								<div class="top_item_iot_des">
									<p class="item_iot_title"><%= dt.name %></p>
									<span class="number_element"><%= dt.elements.length %></span>
									<psan class="group_status"></psan>
								</div>
								<div class="top_item_iot_setting">
									<i class="fa-solid fa-ellipsis"></i>
									<div class="setting_gr">
										<li class="setting_gr_item">
											<p class="setting_see">
												<i class="fa-solid fa-note-sticky"></i>
												Xem chi tiết
											</p>
										</li>
										<li class="setting_gr_item">
											<p class="setting_copy_link">
												<i class="fa-solid fa-copy"></i>
												Copy link
											</p>
										</li>
										<li class="setting_gr_item">
											<p class="setting_setting">
												<i class="fa-solid fa-gear"></i>
												Cài đặt
											</p>
										</li>
										<li class="setting_gr_item setting_gr_item_dele">
											<form method="post" action="/admin/iot/deleteGr/<%= dt._id %>">
												<button class="setting_btn_delete">
													<i class="fa-solid fa-trash"></i>
													Xóa
												</button>
											</form>
										</li>
										
									</div>
								</div>
							</div>
							<div class="center_item_iot" style="background-image:url('<%= dt.imageUrl %>');"></div>
							<div class="end_item_iot">
								<a href="/admin/iot/home/elements/<%= dt._id %>" class="btn_see_element">
									<i class="fa-solid fa-eye"></i>
									Xem cụm
								</a>
							</div>
						</div>
				<% } %>
					<% } else { %>
            			<p class="nogr">Chưa có cụm nào!<p>
        			<% } %>
				
				
				
				<div class="iot_item_group iot_create_group">
					<div class="iot_create_group_box">
						<i class="fa-solid fa-plus"></i>
					</div>
					<div class="conatiner_create_group">
						<form method="post" action="/admin/iot/createGr">
							<div class="conatiner_create_group-wrap">
								<div class="conatiner_create_group-item">
									<label for="name" class="conatiner_create_group-item-des">Tên</label>
									<input id="name" class="conatiner_create_group-item-input" name="name" placeholder="Tên cụm...">
								</div>
								<div class="conatiner_create_group-item">
									<label for="des" class="conatiner_create_group-item-des">Mô tả</label>
									<textarea id="des" name="des" placeholder="Mô tả..."></textarea>
								</div>
								<div class="conatiner_create_group-item">
									<label for="img" class="conatiner_create_group-item-des">Link ảnh</label>
									<input id="img" class="conatiner_create_group-item-input" name="imageUrl" placeholder="Link ảnh...">
								</div>
							</div>
							<div class="box_btn">
								<button class="btn_create_gr">Tạo cụm</button>
								<div class="btn_back">Hủy</div>
							</div>
						</form>
					</div>
				</div>
				
			</div>
		</div>
	</div>

<%- include('../includes/footer.ejs') %>


<script src="/js/hanldeScroll/hanldeScrollHeader.js"></script>
<script>
	const btn_back = document.querySelector('.btn_back');
	const iot_create_group_box = document.querySelector('.iot_create_group_box')
	const conatiner_create_group = document.querySelector('.conatiner_create_group')
	
	iot_create_group_box.onclick = () => {
		conatiner_create_group.style.display = 'flex';
	}
	
	btn_back.onclick = () => {
		conatiner_create_group.style.display = 'none';
	}
	
</script>